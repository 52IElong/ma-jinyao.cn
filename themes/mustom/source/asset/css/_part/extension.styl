@keyframes extension-appear
  from
    transform s('translateX(%s)', $gap * 6 + $font_size)
  to
    transform translateX(0)

@keyframes extension-el-appear
  from
    opacity 0
  to
    opacity 1

[p-extension]
  position fixed
  left $gap * 2
  bottom $gap * 2
  z-index 3
  user-select none
  animation extension-appear 0.6s ease
  &:hover
    [p-extension-button]
      border-radius 50% 0 0 50%
      background var(--color-extension-front)
      border-right none
      border-color var(--color-extension-front)
    [p-extension-front], [p-extension-back]
      transform scale(0.8)
    [p-extension-frame]
      display inline-block

[p-extension-button]
  display inline-block
  width $font_size * 2 + $gap
  height $font_size * 2 + $gap
  border $gap * 0.5 solid var(--color-extension-back)
  background var(--color-extension-back)
  border-radius 50%
  cursor pointer
  transition none

[p-extension-front], [p-extension-back]
  height 100%
  animation extension-el-appear 0.6s ease

[p-extension-back]
  display none

[p-extension-frame]
  display none
  min-width $extension_grid_width + $gap * 2
  min-height $font_size * 2 + $gap * 2
  padding-right $gap
  background var(--color-extension-back)
  border-radius $gap $gap $gap 0
  box-shadow 0 0 0 $gap * 0.5 var(--color-extension-front)

[p-extension-scroll]
  max-height $extension_grid_width * 2.3 + $gap * 4 + $font_size * 1.6
  overflow-x hidden
  overflow-y auto
  &::-webkit-scrollbar
    width $gap
    background var(--color-clear)
  &::-webkit-scrollbar-thumb
    background-color var(--color-text)

[p-extension-content]
  max-width $extension_grid_width * 3 + $gap * 4
  a
    display inline-block
    width $extension_grid_width
    margin $gap 0 0 $gap
    border-radius $gap
    color var(--color-extension-front)
    &:hover
      background var(--color-extension-hover)
    img, span
      display block
    img
      width 100%
      transform scale(0.8)
      border-radius $gap
      overflow hidden
    span
      font-size 0.8em
      line-height 1
      text-align center
      padding-bottom $extension_grid_width * 0.1
      white-space nowrap
      text-overflow ellipsis
      overflow hidden

:root.night
  [p-extension-front]
    display none
  [p-extension-back]
    display initial